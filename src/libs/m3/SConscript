Import('env')

lib = env.StaticLibrary(
    target = 'libm3',
    source = [
        env.Glob('*.cc'), env.Glob('*/*.cc'),
        env.Glob('arch/$ARCHTYPE/*.S'), env.Glob('arch/$ARCHTYPE/*.cc'),
        env.Glob('arch/$ARCHTYPE-$MACH/*.S'), env.Glob('arch/$ARCHTYPE-$MACH/*.cc'),
        env.Glob('arch/$ARCH/*.S'), env.Glob('arch/$ARCH/*.cc'),
        env.Glob('arch/$ARCH-$MACH/*.S'), env.Glob('arch/$ARCH-$MACH/*.cc')
    ]
)
env.Install(env['LIBDIR'], lib)
